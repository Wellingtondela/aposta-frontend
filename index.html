<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>WSA Apostas</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 2rem;
      background: #f2f2f2;
    }

    .card {
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      max-width: 400px;
      margin: auto;
      padding: 2rem;
      text-align: center;
    }

    .escudos {
      display: flex;
      justify-content: space-around;
      align-items: center;
      margin-bottom: 1rem;
    }

    .escudos img {
      width: 80px;
      height: auto;
    }

    .vs {
      font-weight: bold;
      font-size: 1.2rem;
    }

    input[type="text"] {
      width: 100%;
      margin-top: 1rem;
      padding: 10px;
      font-size: 1rem;
    }

    .placares {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .placar-btn {
      padding: 10px 15px;
      border: 2px solid #ccc;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      background-color: #eee;
      transition: background-color 0.2s, border-color 0.2s;
    }

    .placar-btn.selected {
      background-color: #28a745;
      color: white;
      border-color: #218838;
    }

    .enviar {
      margin-top: 1.5rem;
      width: 100%;
      padding: 10px;
      background: #28a745;
      color: white;
      border: none;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
    }

    .enviar:hover {
      background: #218838;
    }

    .mensagem {
      margin-top: 1rem;
      text-align: center;
    }

    /* Campo de placar personalizada escondido inicialmente */
    #placar-personalizado-container {
      margin-top: 1rem;
      display: none;
    }
  </style>
</head>
<body>

<div class="card">
  <div class="escudos">
    <img src="https://upload.wikimedia.org/wikipedia/en/a/a7/Paris_Saint-Germain_F.C..svg" alt="Escudo PSG">
    <span class="vs">VS</span>
    <img src="https://upload.wikimedia.org/wikipedia/commons/0/05/FC_Internazionale_Milano_2021.svg" alt="Escudo Inter de Milão">
  </div>

  <h2>PSG x Inter de Milão</h2>


  <div class="placares" id="placares">
    <button class="placar-btn">0x0</button>
    <button class="placar-btn">1x0</button>
    <button class="placar-btn">0x1</button>
    <button class="placar-btn">1x1</button>
    <button class="placar-btn">2x0</button>
    <button class="placar-btn">0x2</button>
    <button class="placar-btn">2x1</button>
    <button class="placar-btn">1x2</button>
    <button class="placar-btn">2x2</button>
    <button class="placar-btn">3x0</button>
    <button class="placar-btn">0x3</button>
    <button class="placar-btn">3x1</button>
    <button class="placar-btn">1x3</button>
    <button class="placar-btn">3x2</button>
    <button class="placar-btn">2x3</button>
    <button class="placar-btn">3x3</button>

    <!-- Botão para ativar placar personalizado -->
    <button class="placar-btn" id="btn-personalizado">Personalizada</button>
  </div>

  <div id="placar-personalizado-container">
    <input type="text" id="placar-personalizado" placeholder="PSG x Inter (ex: 4x3)" maxlength="5" />
  </div>
<input type="text" id="telefone" placeholder="Seu telefone">
  <button class="enviar" onclick="enviarAposta()">Enviar Aposta</button>
  <div class="mensagem" id="mensagem"></div>
</div>

<script>
  let placarSelecionado = '';
  let usandoPersonalizado = false;

  const placaresBtns = document.querySelectorAll('.placar-btn');
  const btnPersonalizado = document.getElementById('btn-personalizado');
  const containerPersonalizado = document.getElementById('placar-personalizado-container');
  const inputPersonalizado = document.getElementById('placar-personalizado');

  // Função para limpar seleção dos botões (exceto o personalizado)
  function limparSelecao() {
    placaresBtns.forEach(btn => {
      if (btn !== btnPersonalizado) btn.classList.remove('selected');
    });
  }

  placaresBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      if (btn === btnPersonalizado) {
        // Ativa placar personalizado
        usandoPersonalizado = true;
        limparSelecao();
        btnPersonalizado.classList.add('selected');
        containerPersonalizado.style.display = 'block';
        inputPersonalizado.focus();
        placarSelecionado = '';
      } else {
        // Seleciona placar padrão
        usandoPersonalizado = false;
        containerPersonalizado.style.display = 'none';
        limparSelecao();
        btn.classList.add('selected');
        placarSelecionado = btn.textContent;
        inputPersonalizado.value = '';
      }
    });
  });

  async function enviarAposta() {
    const telefone = document.getElementById('telefone').value.trim();
    let aposta = '';

    if (usandoPersonalizado) {
      aposta = inputPersonalizado.value.trim();
    } else {
      aposta = placarSelecionado;
    }

    const mensagem = document.getElementById('mensagem');

    if (!telefone || !aposta) {
      mensagem.textContent = 'Preencha o telefone e escolha ou digite um placar.';
      mensagem.style.color = 'red';
      return;
    }

    // Validação simples do formato do placar personalizado (ex: 4x3)
    if (usandoPersonalizado) {
      const regexPlacar = /^[0-9]+x[0-9]+$/;
      if (!regexPlacar.test(aposta)) {
        mensagem.textContent = 'Formato do placar personalizado inválido. Use formato Ex: 4x3';
        mensagem.style.color = 'red';
        return;
      }
    }

    try {
      const response = await fetch('https://aposta-backend.onrender.com/apostar', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ telefone, aposta })
      });

      const data = await response.json();

      if (data.sucesso) {
        mensagem.textContent = data.mensagem;
        mensagem.style.color = 'green';
        // Limpar campos
        document.getElementById('telefone').value = '';
        if (usandoPersonalizado) {
          inputPersonalizado.value = '';
        } else {
          limparSelecao();
          placarSelecionado = '';
        }
        usandoPersonalizado = false;
        containerPersonalizado.style.display = 'none';
        btnPersonalizado.classList.remove('selected');
      } else {
        mensagem.textContent = data.erro || 'Erro ao enviar.';
        mensagem.style.color = 'red';
      }
    } catch (err) {
      mensagem.textContent = 'Erro de conexão.';
      mensagem.style.color = 'red';
    }
  }
</script>

</body>
</html>
